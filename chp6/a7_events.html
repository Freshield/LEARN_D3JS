<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Transition Events</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <script type="text/javascript" src="d3.js"></script>
</head>
<body>

<script type="text/javascript">
    var body = d3.select('body'),
        duration = 3000

    var div = body.append('div')
    .classed('box', true)
    .style('background-color', 'steelblue')
    .style('color', 'white')
    .text('waiting')
    .transition().duration(duration)
    .delay(1000)
    .each('start', function () {
        console.log(arguments)
        d3.select(this).text('transition')
    })
        .each('end', function () {
            d3.select(this).text(function (d, i) {
                return 'done'
            })
        })
    .style('margin-left', '600px')
</script>

</body>
</html>